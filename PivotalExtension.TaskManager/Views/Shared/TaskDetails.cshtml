@model PivotalTrackerDotNet.Domain.Task           
@using PivotalExtension.TaskManager
@using PivotalTrackerDotNet.Domain;

<!-- TODO: Get rid of passthroughs of auth token -->

<div class="@Model.GetStyle((AuthenticationToken)Session["token"])" id="@string.Format("{0}-{1}-{2}", Model.ProjectId, Model.ParentStoryId, Model.Id)">
    <h3>Task</h3>
    <p>@Html.Raw(Html.FormatLinksInPlace(Model.GetDescriptionWithoutOwners()))</p>
    <p><strong>@string.Join("/", Model.GetOwners((AuthenticationToken)Session["token"]).Select(o => o.Initials))</strong></p>
    <p><a href="#" onclick="Complete('@string.Format("{0}-{1}-{2}", Model.ProjectId, Model.ParentStoryId, Model.Id)', @(Model.Complete ? "false" : "true")); return false">@(Model.Complete ? "Reopen" : "Complete")</a></p>
</div>